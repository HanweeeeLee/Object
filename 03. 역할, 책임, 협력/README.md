# 역할, 책임, 협력
> 객체지향 패러다임의 관점에서 핵심은 역할, 책임, 협력이다.

## 1. 협력

### 협력
> 협력? 어떤 객체가 다른 객체에게 무언가를 요청하는것
#### 협력은 메시지 전송을 통해 실행한다. 메시지 전송은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다. 
#### 객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 캡슐화 하는것 ! 
 > 이전 예제에서 Screening과 Movie의 관계를 생각해보자. 예약의 정보는 Screening에 있고 예약을 하기위해서는 Movie가 Screening에 메시지를 던져야 한다. Screening의 프로퍼티에 접근해서는 안된다.
 
 ### 협력이 설계를 위한 문맥을 결정한다.
 #### 객체를 설계할 때 어떤 행동과 상태를 할당했다면 그 이유는?
 > 그 객체가 어떤 협력에 참여하기를 바라기 때문. 그리고 객체가 협력에 참여할 수 있는 이유는 협력에 필요한 적절한 행동을 보유하고 있기 때문.
 > 이전 예제에서 보면 Movie는 할인정책을 결정하고 Screening이 영화를 play하는듯?
 #### 협력은 객체를 구성하는 행동과 상태 모두를 결정한다. 협력은 객체를 설계하는 데 필요한 일종의 문맥(context)을 제공한다.
 
 ## 2. 책임
 
 ### 책임이란?
 - 협력에 참여하기 위해 객체가 수행하는 행동
 - 책임은 하는 것(doing)과 아는것(knowing)의 두가지 범주로 나눌 수 있다.
 #### 하는것 
  - 객체를 생성하거나 계산을 수행하는 등의 스스로 하는것
  - 다른 객체의 행동을 시작시키는 것
  - 다른 객체의 활동을 제어하고 조절하는 것
#### 아는것
 - 사적인 정보에 관해 아는 것
 - 관련된 객체에 관해 아는 것
 - 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
 > 이전 챕터의 예제를 통해 본다면? Screening의 책임은 영화를 예매하는것. Movie의 책임은 요금을 계산하는 것.
 #### 객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것
 #### [CRC카드?](https://ko.wikipedia.org/wiki/CRC_%EC%B9%B4%EB%93%9C)
 
 ### 책임 할당
 자율적인 객체를 만드는 가장 기본적인 방법은 전문가에게 맡기는것. -> 정보 전문가 패턴(INFORMATION EXPERT)
 ![KakaoTalk_Photo_2021-06-20-21-41-52](https://user-images.githubusercontent.com/60125719/122674469-57d7c400-d210-11eb-8900-fdc1bada1ef0.jpeg)
 > 예매하라는 메시지를 전문가인 Screening에게 맡기고, Screeing에서 예매하기 위한 계산을 하는것을 전문가인 Movie에게 맡긴다.
 
 ### 책임 주도 설계
 책임에 초점을 맞추는 설계. 책임 주도 설계(Responsibility-Driven Design, RDD) (영화 예매 협력을 설계했던 과정을 떠올리며 읽어보자.)
  - 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
  - 시스템 책임을 더 작은 책임으로 분할한다.
  - 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
  - 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
  - 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.
  
### 메시지가 객체를 결정한다.
'객체에게 책임을 할당하는 데 필요한 메시지를 먼저 식별하고 메시지를 처리할 객체를 나중에 선택했다.'는점은 중요함. (위의 이미지를 보자.)  
이유: 
 - 1. 객체가 최소한의 인터페이스를 가질 수 있게된다. (필요한 메시지가 식별될 때까지 퍼블릭 인터페이스에 어떤것도 추가하지 않기 때문)
 - 2. 객체는 충분히 추상적인 인터페이스를 가질 수 있게 된다. (메시지를 먼저 식별하면 무엇을 수행할지에 초점을 맞추는 인터페이스를 얻을 수 있음)
 
### 행동이 살태를 결정한다.
 - 객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법이다.
 - 객체지향 프로그래밍에서 가장 많이하는 실수 : 객체의 행동이 아니라 상태에 초점을 맞추는것. 이렇게 개발하게되면 캡슐화가 잘 이루어지지 않는다. 
 - 즉, 상태가 아닌 행동에 초점을 맞추자.
 

## 3. 역할
### 역할? 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합

### 유연하고 재사용 가능한 협력
역할이 중요한 이유.  
![KakaoTalk_Photo_2021-06-22-17-28-59](https://user-images.githubusercontent.com/60125719/122891300-61336e80-d37f-11eb-918b-8ed9afc4e0ad.jpeg)
> 역할을 생각하지 않고 개발을 하게되면 위의 그림과 같이 중복된 코드가 생성된다.
![KakaoTalk_Photo_2021-06-22-17-29-02](https://user-images.githubusercontent.com/60125719/122891542-8f18b300-d37f-11eb-8837-9a50c02c8c91.jpeg)
> 역할은 다른 것으로 교체할 수 있는 책임의 집합이다.
> 추상화를 통해 구현하자

### 역할의 구현
역할을 구현하는 가장 일반적인 방법은 추상클래스와 인터페이스를 사용하는것.

### 객체 대 역할
 - 역할은 객체가 참여할 수 있는 일종의 슬롯
 - 협력에 참여하는 후보가 여러 종류의 객체에 의해 수행될 필요가 있다면 그 후보는 역할이 되지만 단지 한 종류의 객체만이 협력에 참여할 필요가 있다면 후보는 객체가 된다.
 - 객체에 관해 생각할 때 '이 객체가 무슨 역할을 수행해야 하는가?' 라고 자문해보자
 - 협력을 구체적인 객체가 아니라 추상적인 역할의 관점에서 설계하면 협력이 유연하고 재사용이 가능해진다.
 <img width="378" alt="img" src="https://user-images.githubusercontent.com/60125719/122893097-f71bc900-d380-11eb-8586-4cf787dc403f.png">

### 역할과 추상화
#### 추상화의 장점
 - 세부 사항에 억눌리지 않고도 상위 수준의 정책을 쉽고 간단하게 표현할 수 있다.
 ex) 
 ![KakaoTalk_Photo_2021-06-22-17-52-49](https://user-images.githubusercontent.com/60125719/122895014-b02ed300-d382-11eb-9b5f-6af96805f2c1.jpeg)
 - 설계를 유연하게 만들 수 있다.
 
 ### 배우와 배역
 연극의 배역과 배우간의 관계
  - 배역은 연극 배우가 특정 연극에서 연기하는 역할이다.
  - 배역은 연극이 상영되는 동안에만 존재하는 일시적인 개념이다.
  - 연극이 끝나면 연극 배우는 배역이라는 역할을 벗어 버리고 원래의 연극 배우로 돌아온다.
  - 서로 다른 배우들이 동일한 배역을 연기할 수 있다.
  - 하나의 배우가 다양한 연극 안에서 서로 다른 배역을 연기할 수 있다.
  
  



 
 
 
 
 
 

